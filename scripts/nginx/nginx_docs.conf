# Nginx configuration for MkDocs documentation
# Place this file in /etc/nginx/sites-available/docs
# Then create symlink: sudo ln -s /etc/nginx/sites-available/docs /etc/nginx/sites-enabled/
# Reload nginx: sudo systemctl reload nginx

server {
    listen 80;
    server_name 10.0.0.75;
    
    # Documentation root
    location /docs/ {
        alias /var/www/docs/;
        index index.html index.htm;
        try_files $uri $uri/ /docs/index.html;
        
        # Enable gzip compression
        gzip on;
        gzip_vary on;
        gzip_min_length 1024;
        gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml+rss application/json;
        
        # Cache static assets
        location ~* \.(jpg|jpeg|png|gif|ico|css|js|svg|woff|woff2|ttf|eot)$ {
            expires 30d;
            add_header Cache-Control "public, immutable";
        }
    }
    
    # Redirect root to docs
    location = / {
        return 301 /docs/;
    }
    
    # Health check endpoint
    location /health {
        access_log off;
        return 200 "healthy\n";
        add_header Content-Type text/plain;
    }
}

# Optional: HTTPS configuration (uncomment and configure SSL certificates)
# server {
#     listen 443 ssl http2;
#     server_name 10.0.0.75;
#     
#     ssl_certificate /path/to/certificate.crt;
#     ssl_certificate_key /path/to/private.key;
#     
#     location /docs/ {
#         alias /var/www/docs/;
#         index index.html;
#         try_files $uri $uri/ =404;
#         
#         gzip on;
#         gzip_vary on;
#         gzip_min_length 1024;
#         gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml+rss application/json;
#     }
#     
#     location = / {
#         return 301 /docs/;
#     }
# }

